<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cashier Dashboard - Telemedicine</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        :root {
            --gold: #d4af37;
            --gold-dark: #b58b00;
            --gold-light: #ffd700;
            --black: #0f0f10;
            --black-light: #1a1a1b;
            --black-lighter: #242424;
        }
        body { background: linear-gradient(135deg, var(--black) 0%, var(--black-light) 100%); color: #e0e0e0; margin:0; font-family: 'Segoe UI', sans-serif; }
        .dashboard-container { display: grid; grid-template-columns: 220px 1fr; min-height:100vh; }
        .sidebar { background: linear-gradient(180deg,var(--black-light),var(--black-lighter)); padding:20px; border-right:2px solid var(--gold); }
        .sidebar h2 { color:var(--gold-light); margin-top:0; }
        .nav-item { padding:10px; margin-bottom:8px; background:var(--black-lighter); border-radius:4px; cursor:pointer; }
        .nav-item:hover { background:rgba(212,175,55,0.1); color:var(--gold-light);} 
        .main-content { padding:30px; }
        .stats-grid { display:grid; grid-template-columns: repeat(auto-fit,minmax(180px,1fr)); gap:16px; margin-bottom:20px; }
        .stat-card { background: linear-gradient(135deg, rgba(212,175,55,0.08), rgba(181,139,0,0.04)); border:2px solid var(--gold); padding:14px; border-radius:8px; }
        .stat-card .value { font-size:28px; color:var(--gold-light); font-weight:bold; }
        .table-container { background:var(--black-light); border:2px solid var(--gold); border-radius:8px; overflow:hidden; }
        thead th { color:var(--gold-light); padding:12px; background:rgba(212,175,55,0.06); }
        tbody td { padding:10px; color:#d0d0d0; }
        .btn { padding:10px 16px; border-radius:6px; border:none; cursor:pointer; font-weight:bold; }
        .btn-primary { background:var(--gold); color:var(--black); }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <div class="sidebar">
            <h2>ðŸ’µ CASHIER</h2>
            <div class="nav-item active" onclick="showSection('payments')">ðŸ’³ Payments</div>
            <div class="nav-item" onclick="showSection('patients')">ðŸ‘¥ Patients</div>
            <div class="nav-item" onclick="showSection('reports')">ðŸ“Š Reports</div>
            <hr style="border-color:var(--gold); margin:12px 0;">
            <button class="btn btn-primary" onclick="logout()">ðŸšª Logout</button>
        </div>
        <div class="main-content">
            <div class="header-bar"><h1 style="color:var(--gold-light)">Cashier Dashboard</h1><span id="userinfo" style="color:var(--gold-light)">Welcome, Cashier</span></div>
            <div id="payments" class="section active">
                <h2 style="color:var(--gold-light)">Process Payment</h2>
                <div style="max-width:560px; margin-bottom:16px;">
                    <label>Patient ID <input id="payPatient" style="width:100%; padding:10px; background:var(--black-lighter); border:1px solid var(--gold); color:#e0e0e0;" /></label>
                    <label>Amount <input id="payAmount" type="number" style="width:100%; padding:10px; background:var(--black-lighter); border:1px solid var(--gold); color:#e0e0e0;" /></label>
                    <div style="margin-top:10px;"><button class="btn btn-primary" onclick="processPayment()">ðŸ’¸ Process Payment</button></div>
                </div>
                <div class="table-container">
                    <div class="table-header" style="padding:12px; background:linear-gradient(90deg,var(--gold),var(--gold-dark)); color:var(--black)"><h2 style="margin:0;">Recent Transactions</h2></div>
                    <table><thead><tr><th>Date</th><th>Patient</th><th>Amount</th><th>Status</th></tr></thead><tbody id="txTable"><tr><td>2025-12-05</td><td>John Mtundi</td><td>$125.00</td><td style="color:#90ee90">âœ“ Paid</td></tr></tbody></table>
                </div>
            </div>
            <div id="patients" class="section" style="display:none">
                <h2 style="color:var(--gold-light)">Patient Lookup</h2>
                <div id="patientsList"></div>
            </div>
            <div id="reports" class="section" style="display:none">
                <h2 style="color:var(--gold-light)">Reports</h2>
                <div id="reportsArea"></div>
            </div>
        </div>
    </div>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script>
        function init() {
            const user = JSON.parse(localStorage.getItem('user') || '{}');
            if (user.full_name) document.getElementById('userinfo').textContent = `Welcome, ${user.full_name}`;
        }
        window.addEventListener('load', init);
        function showSection(id) { document.querySelectorAll('.section').forEach(s=>s.style.display='none'); document.getElementById(id).style.display='block'; }
        function logout() { if(confirm('Logout?')) { localStorage.removeItem('user'); window.location.href='index.php'; } }
        function processPayment(){ const p=document.getElementById('payPatient').value; const a=document.getElementById('payAmount').value; if(!p||!a){alert('Enter patient ID and amount');return;} const tbody=document.getElementById('txTable'); const tr=document.createElement('tr'); tr.innerHTML=`<td>${new Date().toLocaleDateString()}</td><td>${p}</td><td>$${Number(a).toFixed(2)}</td><td style="color:#90ee90">âœ“ Paid</td>`; tbody.insertBefore(tr, tbody.firstChild); alert('Payment recorded (local demo).'); }
        try{ const socket=io('http://'+window.location.hostname+':4000'); socket.on('realtime-event', f=>{ console.log('Realtime (cashier):', f); const el=document.createElement('div'); el.className='alert alert-info'; el.style.background='rgba(212,175,55,0.08)'; el.style.border='1px solid var(--gold)'; el.style.padding='8px'; el.style.color='var(--gold-light)'; el.textContent=`Realtime: ${f.event_type} for patient ${f.patient_id}`; document.querySelector('.main-content').insertBefore(el, document.querySelector('.main-content').firstChild); setTimeout(()=>el.remove(),8000); }); }catch(e){console.warn(e);}    
    </script>
</body>
</html>
